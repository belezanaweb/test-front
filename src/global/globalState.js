import React, { useState } from 'react'
import axios from 'axios'
import { baseUrl } from '../constants/constants'
import GlobalStateContext from './globalStateContext'

const GlobalState = (props) => {
  const [cart, setCart] = useState({})
  const [products, setProducts] = useState([])
  const [useCard, setUseCard] = useState({})

  const getProducts = () => {
    axios
      .get(`${baseUrl}`)
      .then((response) => {
        setCart(response.data)
        setProducts(response.data.items)
      })
      .catch((error) => alert(error.message))
  }

  const data = { cart, products, getProducts, setCart, setProducts, useCard, setUseCard }

  return <GlobalStateContext.Provider value={data}>{props.children}</GlobalStateContext.Provider>
}

export default GlobalState
